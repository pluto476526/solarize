{% extends 'analytics/main.html' %}
{% load static %}

{% block main %}

<!-- Content Start -->
<div class="content">
    <!-- Navbar Start -->
    {% include 'analytics/nav.html' %}
    <!-- Navbar End -->


    <div class="container-fluid px-4">
        <!-- Header -->
        <div class="row mb-3 mt-3 px-2">
            <div class="col-12 card shadow-sm bg-secondary">
                <h1 class="h3 text-primary my-3"><i class="fas fa-sync me-2"></i>Dual-Axis Tracking System Simulation</h1>
                <p class="text-muted small">Dual-axis tracking systems are the most advanced category of solar tracking technology. The arrays maintain perfect perpendicular orientation to the sun throughout both daily and seasonal movement patterns. These sophisticated systems adjust in both azimuth (compass direction) and altitude (elevation angle) dimensions, achieving maximum possible irradiance capture under clear sky conditions. Dual-axis tracking is particularly valuable for high-concentration photovoltaic systems and applications where land constraints demand maximum energy density from limited area.</p>
                
                <p class="text-muted small">Within PVLib, dual-axis tracking simulation employs precise astronomical calculations to determine the sun's exact position in both azimuth and altitude coordinates throughout the year. The library models the continuous adjustment of panel orientation to maintain optimal alignment, calculating the incremental energy gains from perfect sun-following capability. PVLib incorporates the additional mechanical complexity through more sophisticated movement algorithms, increased energy consumption for dual-motor systems, and enhanced stowing protocols for extreme weather conditions. The simulation accounts for the unique shading patterns that emerge from constantly changing array geometry and their impact on overall system performance.</p>
                
                <p class="text-muted small">Research institutions utilize these simulations to quantify the maximum theoretical energy harvest potential for comparison against practical system configurations.</p>
            </div>
        </div>

        <!-- Compact Form Layout -->
        <form method="post" class="row g-3">
            {% csrf_token %}
            <!-- Location Parameters -->
            <div class="col-lg-4">
                <div class="card shadow-sm h-100 bg-secondary p-3">
                    <div class="">
                        <h6 class="mb-0 text-warning px-3"></i>Location</h6>
                    </div>

                    <div class="card-body">
                        <div class="row g-2">
                            <div class="col-6">
                                <label class="form-label small">Latitude</label>
                                <input type="number" class="form-control form-control-sm" name="lat" value="-1.286389" step="any">
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Longitude</label>
                                <input type="number" class="form-control form-control-sm" name="lon" value="36.817223" step="any">
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Altitude (m)</label>
                                <input type="number" class="form-control form-control-sm" name="alt" value="0" step="any">
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Timezone</label>
                                <select class="form-select form-select-sm" name="tz">
                                    <option selected value="Africa/Nairobi">Africa/Nairobi</option>
                                    <option>UTC</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label class="form-label small">Location Name</label>
                                <input type="text" class="form-control form-control-sm" name="name" value="Nairobi">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Configuration -->
            <div class="col-lg-8">
                <div class="card shadow-sm h-100 bg-secondary p-3">
                    <div class="">
                        <h6 class="mb-0 text-warning px-3">System Configuration</h6>
                    </div>
                    <div class="card-body p-3">
                        <div class="row g-2">
                            <div class="col-6">
                                <label class="form-label small">PV Module</label>
                                <input 
                                    type="text" 
                                    id="module-input" 
                                    name="module" 
                                    list="module-list"
                                    autocomplete="off"
                                    class="form-control form-control-sm"
                                    placeholder="Type to search..."
                                >
                                <datalist id="module-list"></datalist>
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Module Database</label>
                                <select class="form-select form-select-sm" name="module_db">
                                    <option value="SandiaMod">Sandia Labs Module Database</option>
                                    <option value="CECMod" selected>CEC Module Database</option>
                                </select>
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Inverter</label>
                                <input 
                                    type="text" 
                                    id="inverter-input" 
                                    name="inverter" 
                                    list="inverter-list"
                                    autocomplete="off"
                                    class="form-control form-control-sm"
                                    placeholder="Type to search..."
                                >
                                <datalist id="inverter-list"></datalist>
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Inverter Database</label>
                                <input class="form-control form-control-sm bg-secondary" value="CEC Inverter Database" disabled>
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Azimuth (째)</label>
                                <input type="number" class="form-control form-control-sm" name="azimuth" value="180" min="0" max="360">
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Tilt Angle (째)</label>
                                <input type="number" class="form-control form-control-sm" name="tilt" value="20" min="0" max="90">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loss Parameters -->
            <!-- <div class="col-lg-6">
                <div class="card shadow-sm h-100 bg-secondary p-4">
                    <div class="">
                        <h6 class="mb-0 text-warning px-3">Loss Parameters (%)</h6>
                    </div>
                    <div class="card-body p-3">
                        <div class="row g-2">
                            <div class="col-6">
                                <label class="form-label small">Soiling</label>
                                <input type="range" class="form-range" value="2" min="0" max="10" step="0.5">
                                <div class="small text-center">2%</div>
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Shading</label>
                                <input type="range" class="form-range" value="3" min="0" max="20" step="0.5">
                                <div class="small text-center">3%</div>
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Mismatch</label>
                                <input type="range" class="form-range" value="2" min="0" max="5" step="0.5">
                                <div class="small text-center">2%</div>
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Wiring</label>
                                <input type="range" class="form-range" value="2" min="0" max="5" step="0.5">
                                <div class="small text-center">2%</div>
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Nameplate</label>
                                <input type="range" class="form-range" value="1" min="0" max="5" step="0.5">
                                <div class="small text-center">1%</div>
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Age</label>
                                <input type="range" class="form-range" value="0.5" min="0" max="10" step="0.1">
                                <div class="small text-center">0.5%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->

            <!-- Simulation Parameters -->
            <div class="col-lg-12">
                <div class="card shadow-sm h-100 bg-secondary p-3">
                    <div class="">
                        <h6 class="mb-0 text-warning px-3">Simulation Parameters</h6>
                    </div>
                    <div class="card-body p-3">
                        <div class="row g-2">                          
                            <div class="col-6">
                                <label class="form-label small">Start Date</label>
                                <input type="date" class="form-control form-control-sm" value="2023-01-01">
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Temperature Model</label>
                                <select class="form-select form-select-sm" name="temp_model">
                                    <option value="sapm" selected>SAPM</option>
                                    <option>PVsyst</option>
                                    <option>Faiman</option>
                                </select>
                            </div>
                            <div class="col-6">
                                <label class="form-label small">End Date</label>
                                <input type="date" class="form-control form-control-sm" value="2023-12-31">
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Temperature Model Parameters</label>
                                <select class="form-select form-select-sm" name="temp_model_params">
                                    <option value="open_rack_glass_glass" selected>open_rack_glass_glass</option>
                                </select>
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Timeframe</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="timeframe" checked>
                                    <label class="form-check-label small">Hourly</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="timeframe">
                                    <label class="form-check-label small">Daily</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="timeframe">
                                    <label class="form-check-label small">Monthly</label>
                                </div>
                            </div>  
                        </div>
                        <div class="row mt-3">
                            <div class="col-12">
                                <div class="d-flex justify-content-end gap-2">
                                    <button type="button" class="btn btn-outline-primary btn-sm">
                                        <i class="fas fa-redo me-1"></i>Reset
                                    </button>
                                    <button type="submit" class="btn btn-warning btn-sm">
                                        <i class="fas fa-bolt me-1"></i>Run Simulation
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>

        <!-- Compact Documentation -->
        <div class="row mt-3">
            <div class="col-12">
                <div class="card shadow-sm bg-secondary">
                   <div class="text-center rounded p-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <h6 class="mb-0 text-warning px-3"><i class="fas fa-book me-1"></i>PVLib Parameters Documentation</h6>
                            <button class="btn btn-sm btn-outline-light" type="button" data-bs-toggle="collapse" data-bs-target="#docsCollapse">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                    </div>
                    <div class="collapse show" id="docsCollapse">
                        <div class="card-body p-3">
                            <div class="row g-3">
                                <div class="col-md-4">
                                    <h6 class="text-primary">Location Parameters</h6>
                                    <ul class="small ps-3">
                                        <li><strong>Latitude & Longitude:</strong> Geographic coordinates in decimal degrees</li>
                                        <li><strong>Altitude:</strong> Elevation above sea level in meters</li>
                                        <li><strong>Timezone:</strong> Local timezone for proper time alignment</li>
                                    </ul>
                                </div>
                                <div class="col-md-4">
                                    <h6 class="text-primary">System Configuration</h6>
                                    <ul class="small ps-3">
                                        <li><strong>Capacity:</strong> Total DC power rating in kW</li>
                                        <li><strong>Azimuth:</strong> Panel direction (0째=North, 180째=South)</li>
                                        <li><strong>Tilt:</strong> Panel inclination from horizontal</li>
                                        <li><strong>Array Type:</strong> Mounting configuration</li>
                                    </ul>
                                </div>
                                <div class="col-md-4">
                                    <h6 class="text-primary">Loss Parameters</h6>
                                    <ul class="small ps-3">
                                        <li><strong>Soiling:</strong> Dirt/dust on panels (2-5%)</li>
                                        <li><strong>Shading:</strong> Shadows from nearby objects</li>
                                        <li><strong>Mismatch:</strong> Electrical mismatch between modules</li>
                                        <li><strong>Wiring:</strong> Resistance losses (1-3%)</li>
                                    </ul>
                                </div>
                                <div class="col-md-4">
                                    <h6 class="text-primary">Temperature</h6>
                                    <ul class="small ps-3">
                                        <li><strong>Temp Model:</strong> Algorithm for module temperature</li>
                                        <li><strong>Wind Speed:</strong> For convective cooling calculations</li>
                                    </ul>
                                </div>
                                <div class="col-md-4">
                                    <h6 class="text-primary">Simulation</h6>
                                    <ul class="small ps-3">
                                        <li><strong>Timeframe:</strong> Resolution of results</li>
                                        <li><strong>Weather Data:</strong> Source of meteorological data</li>
                                        <li><strong>Albedo:</strong> Ground reflectance coefficient</li>
                                    </ul>
                                </div>
                                <div class="col-md-4">
                                    <h6 class="text-primary">Module Types</h6>
                                    <ul class="small ps-3">
                                        <li><strong>Standard:</strong> Typical silicon (15-17% efficiency)</li>
                                        <li><strong>Premium:</strong> High-efficiency (19-22%)</li>
                                        <li><strong>Thin Film:</strong> Lightweight (10-13%)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>




    <!-- Footer Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="bg-secondary rounded-top p-4">
            <div class="row">
                <div class="col-12 col-sm-6 text-center text-sm-start">
                    &copy; <a href="#">Solarize Solar Forecasting</a>, All Rights Reserved. 
                </div>
                <div class="col-12 col-sm-6 text-center text-sm-end">
                    AI-Powered Solar Energy Predictions
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->
</div>
<!-- Content End -->


{% endblock %}