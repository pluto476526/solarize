{% extends 'analytics/main.html' %}
{% load static %}

{% block main %}

<!-- Content Start -->
<div class="content">
    <!-- Navbar Start -->
    {% include 'analytics/nav.html' %}
    <!-- Navbar End -->

   <!-- Weather Metrics Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="row g-4">
            <!-- Current Temperature -->
            <div class="col-sm-6 col-xl-3">
                <div class="bg-secondary rounded d-flex align-items-center justify-content-between p-4">
                    <i class="fas fa-thermometer-half fa-3x text-warning"></i>
                    <div class="ms-3">
                        <p class="mb-2">Current Temperature</p>
                        <h6 class="mb-0">19.4°C</h6>
                        <small class="text-muted">Feels like 19.7°C</small>
                    </div>
                </div>
            </div>
            
            <!-- Weather Condition -->
            <div class="col-sm-6 col-xl-3">
                <div class="bg-secondary rounded d-flex align-items-center justify-content-between p-4">
                    <i class="fas fa-cloud fa-3x text-info"></i>
                    <div class="ms-3">
                        <p class="mb-2">Weather Condition</p>
                        <h6 class="mb-0">Broken Clouds</h6>
                        <small class="text-muted">53% cloud cover</small>
                    </div>
                </div>
            </div>
            
            <!-- Wind Conditions -->
            <div class="col-sm-6 col-xl-3">
                <div class="bg-secondary rounded d-flex align-items-center justify-content-between p-4">
                    <i class="fas fa-wind fa-3x text-primary"></i>
                    <div class="ms-3">
                        <p class="mb-2">Wind Speed</p>
                        <h6 class="mb-0">3.13 m/s</h6>
                        <small class="text-muted">From 93° (E)</small>
                    </div>
                </div>
            </div>
            
            <!-- Humidity & Pressure -->
            <div class="col-sm-6 col-xl-3">
                <div class="bg-secondary rounded d-flex align-items-center justify-content-between p-4">
                    <i class="fas fa-tint fa-3x text-success"></i>
                    <div class="ms-3">
                        <p class="mb-2">Humidity & Pressure</p>
                        <h6 class="mb-0">89% • 1014 hPa</h6>
                        <small class="text-muted">Dew point: 17.5°C</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Weather Metrics End -->

    <!-- Current Conditions Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="row g-4">
            <!-- Current Weather Widget -->
            <div class="col-sm-12 col-md-6 col-xl-3">
                <div class="bg-secondary rounded p-4">
                    <h6 class="mb-3 text-warning">Current Conditions</h6>
                    <div class="d-flex justify-content-between mb-2">
                        <span>Visibility</span>
                        <strong>10.0 km</strong>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span>UV Index</span>
                        <strong>0.16</strong>
                    </div>
                    <div class="d-flex justify-content-between">
                        <span>Wind Gust</span>
                        <strong>6.71 m/s</strong>
                    </div>
                </div>
            </div>
            
            <!-- Sun & Moon Times -->
            <div class="col-sm-12 col-md-6 col-xl-3">
                <div class="bg-secondary rounded p-4">
                    <h6 class="mb-3 text-info">Sun & Moon</h6>
                    <div class="d-flex justify-content-between mb-2">
                        <span>Sunrise</span>
                        <strong class="text-warning">6:24 AM</strong>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span>Sunset</span>
                        <strong class="text-warning">7:18 PM</strong>
                    </div>
                    <div class="d-flex justify-content-between">
                        <span>Moon Phase</span>
                        <strong class="text-info">Waxing</strong>
                    </div>
                </div>
            </div>
            
            <!-- Weather Alerts Status -->
            <div class="col-sm-12 col-md-6 col-xl-3">
                <div class="bg-secondary rounded p-4">
                    <h6 class="mb-3 text-danger">Weather Alerts</h6>
                    <div class="d-flex justify-content-between mb-2">
                        <span>Active Alerts</span>
                        <span class="badge bg-danger">1 Active</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span>Severity</span>
                        <span class="badge bg-warning">Advisory</span>
                    </div>
                    <div class="d-flex justify-content-between">
                        <span>Duration</span>
                        <small>Until 3 AM</small>
                    </div>
                </div>
            </div>
            
            <!-- Data Freshness -->
            <div class="col-sm-12 col-md-6 col-xl-3">
                <div class="bg-secondary rounded p-4">
                    <h6 class="mb-3 text-primary">Data Status</h6>
                    <div class="d-flex justify-content-between mb-2">
                        <span>Last Updated</span>
                        <small>2 min ago</small>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span>Data Quality</span>
                        <span class="badge bg-success">98%</span>
                    </div>
                    <div class="d-flex justify-content-between">
                        <span>Next Update</span>
                        <small>15:00</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Current Conditions End -->

    <!-- Weather Charts Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="row g-4">
            <!-- Hourly Forecast -->
            <div class="col-sm-12 col-xl-6">
                <div class="bg-secondary text-center rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">48-Hour Forecast</h6>
                        <a href="hourly.html">View Details</a>
                        <div class="dropdown">
                        <a href="#" class="" type="button" id="hourlyOptions" data-bs-toggle="dropdown" aria-expanded="false">
                            Options
                        </a>
                        <div class="dropdown-menu dropdown-menu-end p-3 bg-secondary" style="min-width: 250px;">
                            <form id="hourlyForecastOptions">
                                <!-- Parameter Selection -->
                                <div class="mb-3">
                                    <label for="parameterSelect" class="form-label small fw-bold text-muted">PARAMETER</label>
                                    <select class="form-select form-select-sm" id="parameterSelect">
                                        <option selected>Temperature</option>
                                        <option value="precipitation">Precipitation</option>
                                        <option value="humidity">Humidity</option>
                                        <option value="wind">Wind Speed</option>
                                        <option value="pressure">Pressure</option>
                                    </select>
                                </div>
                                
                                <!-- Time Range -->
                                <div class="mb-3">
                                    <label for="timeRange" class="form-label small fw-bold text-muted">TIME RANGE</label>
                                    <select class="form-select form-select-sm" id="timeRange">
                                        <option selected>48 hours</option>
                                        <option value="24">24 hours</option>
                                        <option value="72">72 hours</option>
                                    </select>
                                </div>
                                
                                <!-- Apply Button -->
                                <button type="submit" class="btn btn-sm btn-primary w-100">Apply Filters</button>
                            </form>
                        </div>
                    </div>
                    </div>
                    <div id="hourly-chart">{{ hourly_chart|safe }}</div>
                </div>
            </div>
            
            <!-- Daily Forecast -->
            <div class="col-sm-12 col-xl-6">
                <div class="bg-secondary text-center rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">7-Day Forecast</h6>
                        <a href="daily.html">View Details</a>
                    </div>
                    <div id="daily-forecast-chart">{{ daily_chart|safe }}</div>
                </div>
            </div>
        </div>
    </div>
    <!-- Weather Charts End -->

    <!-- Weather Alerts Overview Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="bg-secondary text-center rounded p-4">
            <div class="d-flex align-items-center justify-content-between mb-4">
                <h6 class="mb-0">Active Weather Alerts</h6>
                <a href="alerts.html">View All</a>
            </div>
            <div class="table-responsive">
                <table class="table text-start align-middle table-bordered table-hover mb-0">
                    <thead>
                        <tr class="text-white">
                            <th scope="col">Alert Type</th>
                            <th scope="col">Issued By</th>
                            <th scope="col">Start Time</th>
                            <th scope="col">End Time</th>
                            <th scope="col">Severity</th>
                            <th scope="col">Description</th>
                            <th scope="col">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Small Craft Advisory</td>
                            <td>NWS Philadelphia</td>
                            <td>5:00 PM</td>
                            <td>3:00 AM</td>
                            <td><span class="badge bg-warning">Advisory</span></td>
                            <td>North winds 15-20 kt with gusts up to 25 kt</td>
                            <td>
                                <a class="btn btn-sm btn-warning me-1" href="">Details</a>
                                <a class="btn btn-sm btn-primary" href="">Map</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- Weather Alerts Overview End -->

    <!-- Weather Widgets Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="row g-4">
            <!-- Weather Factors -->
            <div class="col-sm-12 col-md-6 col-xl-4">
                <div class="h-100 bg-secondary rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <h6 class="mb-0">Weather Factors</h6>
                        <a href="details.html">View All</a>
                    </div>
                    <div class="d-flex align-items-center border-bottom py-3">
                        <div class="rounded-circle bg-warning d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                            <i class="fas fa-cloud-rain text-dark"></i>
                        </div>
                        <div class="w-100 ms-3">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-0">Precipitation</h6>
                                <small>15%</small>
                            </div>
                            <span>Light rain possible</span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center border-bottom py-3">
                        <div class="rounded-circle bg-info d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                            <i class="fas fa-temperature-low text-dark"></i>
                        </div>
                        <div class="w-100 ms-3">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-0">Dew Point</h6>
                                <small>17.5°C</small>
                            </div>
                            <span>Comfortable humidity level</span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center border-bottom py-3">
                        <div class="rounded-circle bg-success d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                            <i class="fas fa-eye text-dark"></i>
                        </div>
                        <div class="w-100 ms-3">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-0">Visibility</h6>
                                <small>10.0 km</small>
                            </div>
                            <span>Clear visibility conditions</span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center pt-3">
                        <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                            <i class="fas fa-compress-arrows-alt text-dark"></i>
                        </div>
                        <div class="w-100 ms-3">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-0">Pressure Trend</h6>
                                <small>Stable</small>
                            </div>
                            <span>1014 hPa, steady conditions</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sun & Moon Details -->
            <div class="col-sm-12 col-md-6 col-xl-4">
                <div class="h-100 bg-secondary rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">Astronomical Data</h6>
                        <a href="astronomy.html">Details</a>
                    </div>
                    <div class="mb-4">
                        <div class="d-flex justify-content-between mb-2">
                            <span>Sunrise</span>
                            <span class="text-warning">6:24 AM</span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Solar Noon</span>
                            <span class="text-warning">12:42 PM</span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Sunset</span>
                            <span class="text-warning">7:18 PM</span>
                        </div>
                        <div class="d-flex justify-content-between mb-3">
                            <span>Daylight</span>
                            <span class="text-warning">12h 54m</span>
                        </div>
                        
                        <div class="d-flex justify-content-between mb-2">
                            <span>Moonrise</span>
                            <span class="text-info">2:31 AM</span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Moonset</span>
                            <span class="text-info">1:18 PM</span>
                        </div>
                        <div class="d-flex justify-content-between mb-3">
                            <span>Moon Phase</span>
                            <span class="text-info">Waxing Crescent</span>
                        </div>
                        
                        <div class="progress mb-3" style="height: 20px;">
                            <div class="progress-bar bg-warning" role="progressbar" style="width: 65%;">
                                Day Progress
                            </div>
                        </div>
                        
                        <div class="text-center mt-3">
                            <small class="text-muted">Current time: 2:58 PM Local</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions & Data Status -->
            <div class="col-sm-12 col-md-6 col-xl-4">
                <div class="h-100 bg-secondary rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">Quick Actions</h6>
                    </div>
                    <div class="d-grid gap-2">
                        <a href="" class="btn btn-warning mb-2">
                            <i class="fas fa-sync-alt me-2"></i>Refresh Data
                        </a>
                        <a href="forecast.html" class="btn btn-primary mb-2">
                            <i class="fas fa-chart-line me-2"></i>Extended Forecast
                        </a>
                        <a href="" class="btn btn-info mb-2">
                            <i class="fas fa-map-marked-alt me-2"></i>Weather Map
                        </a>
                        <a href="alerts.html" class="btn btn-danger mb-2">
                            <i class="fas fa-exclamation-triangle me-2"></i>Alert Settings
                        </a>
                    </div>
                    
                    <div class="mt-4">
                        <h6 class="mb-3">Data Sources Status</h6>
                        <div class="mb-2">
                            <small>OpenWeather API: <span class="text-success">Active</span></small>
                            <div class="progress mb-1" style="height: 5px;">
                                <div class="progress-bar bg-success" role="progressbar" style="width: 98%;"></div>
                            </div>
                        </div>
                        <div class="mb-2">
                            <small>Weather Alerts: <span class="text-success">Monitoring</span></small>
                            <div class="progress mb-1" style="height: 5px;">
                                <div class="progress-bar bg-success" role="progressbar" style="width: 95%;"></div>
                            </div>
                        </div>
                        <div class="mb-2">
                            <small>Satellite Data: <span class="text-success">Connected</span></small>
                            <div class="progress mb-1" style="height: 5px;">
                                <div class="progress-bar bg-success" role="progressbar" style="width: 92%;"></div>
                            </div>
                        </div>
                        <div class="mb-2">
                            <small>Forecast Accuracy: <span class="text-info">94.2%</span></small>
                            <div class="progress mb-1" style="height: 5px;">
                                <div class="progress-bar bg-info" role="progressbar" style="width: 94%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Weather Widgets End -->

    <!-- Detailed Forecast Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="row g-4">
            <!-- Hourly Breakdown -->
            <div class="col-sm-12 col-xl-6">
                <div class="bg-secondary rounded p-4">
                    <h6 class="mb-4 text-warning">Next 24 Hours - Hour by Hour</h6>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th>Temp</th>
                                    <th>Weather</th>
                                    <th>Precip</th>
                                    <th>Wind</th>
                                    <th>Humidity</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Now</td>
                                    <td>19°C</td>
                                    <td><i class="fas fa-cloud text-info"></i></td>
                                    <td>0%</td>
                                    <td>3.1 m/s</td>
                                    <td>89%</td>
                                </tr>
                                <tr>
                                    <td>3 PM</td>
                                    <td>20°C</td>
                                    <td><i class="fas fa-cloud text-info"></i></td>
                                    <td>0%</td>
                                    <td>3.4 m/s</td>
                                    <td>85%</td>
                                </tr>
                                <tr>
                                    <td>4 PM</td>
                                    <td>21°C</td>
                                    <td><i class="fas fa-cloud-sun text-warning"></i></td>
                                    <td>0%</td>
                                    <td>3.2 m/s</td>
                                    <td>82%</td>
                                </tr>
                                <tr>
                                    <td>5 PM</td>
                                    <td>20°C</td>
                                    <td><i class="fas fa-cloud-sun text-warning"></i></td>
                                    <td>0%</td>
                                    <td>3.0 m/s</td>
                                    <td>80%</td>
                                </tr>
                                <tr>
                                    <td>6 PM</td>
                                    <td>19°C</td>
                                    <td><i class="fas fa-cloud text-info"></i></td>
                                    <td>10%</td>
                                    <td>2.8 m/s</td>
                                    <td>83%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Daily Forecast Details -->
            <div class="col-sm-12 col-xl-6">
                <div class="bg-secondary rounded p-4">
                    <h6 class="mb-4 text-warning">7-Day Forecast Details</h6>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Day</th>
                                    <th>High/Low</th>
                                    <th>Weather</th>
                                    <th>Precip</th>
                                    <th>Wind</th>
                                    <th>Humidity</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Today</td>
                                    <td>27° / 18°</td>
                                    <td><i class="fas fa-cloud-rain text-primary"></i></td>
                                    <td>47%</td>
                                    <td>4.0 m/s</td>
                                    <td>59%</td>
                                </tr>
                                <tr>
                                    <td>Wed</td>
                                    <td>26° / 17°</td>
                                    <td><i class="fas fa-cloud text-info"></i></td>
                                    <td>20%</td>
                                    <td>3.5 m/s</td>
                                    <td>65%</td>
                                </tr>
                                <tr>
                                    <td>Thu</td>
                                    <td>28° / 19°</td>
                                    <td><i class="fas fa-sun text-warning"></i></td>
                                    <td>10%</td>
                                    <td>3.2 m/s</td>
                                    <td>58%</td>
                                </tr>
                                <tr>
                                    <td>Fri</td>
                                    <td>29° / 20°</td>
                                    <td><i class="fas fa-sun text-warning"></i></td>
                                    <td>5%</td>
                                    <td>3.0 m/s</td>
                                    <td>55%</td>
                                </tr>
                                <tr>
                                    <td>Sat</td>
                                    <td>27° / 19°</td>
                                    <td><i class="fas fa-cloud-sun text-info"></i></td>
                                    <td>15%</td>
                                    <td>3.8 m/s</td>
                                    <td>62%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Detailed Forecast End -->

    <!-- Data Sources & Methodology Documentation -->
    <div class="container-fluid pt-4 px-4">
        <div class="row g-4">
            <div class="col-12">
                <div class="bg-secondary rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h5 class="mb-0">Weather Data Sources & Methodology</h5>
                        <button type="button" class="btn btn-sm btn-outline-light" data-bs-toggle="collapse" data-bs-target="#dataSourcesCollapse">
                            <i class="fas fa-database me-1"></i>Toggle Data Documentation
                        </button>
                    </div>
                    
                    <div class="collapse show" id="dataSourcesCollapse">
                        <div class="accordion" id="dataSourcesAccordion">
                            
                            <!-- API Providers Section -->
                            <div class="accordion-item bg-dark border-dark">
                                <h2 class="accordion-header">
                                    <button class="accordion-button bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#apiProviders">
                                        <i class="fas fa-cloud me-2"></i>Weather Data Providers
                                    </button>
                                </h2>
                                <div id="apiProviders" class="accordion-collapse collapse show" data-bs-parent="#dataSourcesAccordion">
                                    <div class="accordion-body">
                                        <div class="row g-4">
                                            <div class="col-md-4 text-center">
                                                <div class="border rounded p-3 bg-dark">
                                                    <i class="fas fa-cloud-sun fa-2x text-warning mb-3"></i>
                                                    <h6 class="text-warning">OpenWeather API</h6>
                                                    <p class="text-light small mb-2">Current & Forecast Data</p>
                                                    <span class="badge bg-success">Primary Data Source</span>
                                                    <p class="text-light small mt-2">Provides real-time weather data and forecasts</p>
                                                </div>
                                            </div>
                                            <div class="col-md-4 text-center">
                                                <div class="border rounded p-3 bg-dark">
                                                    <i class="fas fa-satellite fa-2x text-info mb-3"></i>
                                                    <h6 class="text-info">NOAA/NWS</h6>
                                                    <p class="text-light small mb-2">National Weather Service</p>
                                                    <span class="badge bg-info">Official Alerts</span>
                                                    <p class="text-light small mt-2">Severe weather alerts and warnings</p>
                                                </div>
                                            </div>
                                            <div class="col-md-4 text-center">
                                                <div class="border rounded p-3 bg-dark">
                                                    <i class="fas fa-globe-americas fa-2x text-primary mb-3"></i>
                                                    <h6 class="text-primary">Location Services</h6>
                                                    <p class="text-light small mb-2">Geocoding & Timezone</p>
                                                    <span class="badge bg-primary">Geographic Data</span>
                                                    <p class="text-light small mt-2">Location-based weather services</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="alert alert-info mt-3">
                                            <small>
                                                <i class="fas fa-sync-alt me-2"></i>
                                                <strong>Data Integration:</strong> We combine real-time weather observations with forecast models and official alerts to provide comprehensive weather information.
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Data Structure -->
                            <div class="accordion-item bg-dark border-dark">
                                <h2 class="accordion-header">
                                    <button class="accordion-button bg-dark text-light collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#dataStructure">
                                        <i class="fas fa-code me-2"></i>Weather Data Structure
                                    </button>
                                </h2>
                                <div id="dataStructure" class="accordion-collapse collapse" data-bs-parent="#dataSourcesAccordion">
                                    <div class="accordion-body">
                                        <h6 class="text-warning mb-3">API Response Structure</h6>
                                        <div class="row g-3 mb-4">
                                            <div class="col-md-6">
                                                <h6 class="text-info">Current Weather Data</h6>
                                                <ul class="text-light small">
                                                    <li><strong>Temperature:</strong> Current, feels like, min, max</li>
                                                    <li><strong>Atmospheric:</strong> Pressure, humidity, visibility</li>
                                                    <li><strong>Wind:</strong> Speed, direction, gust</li>
                                                    <li><strong>Weather:</strong> Conditions, description, icon</li>
                                                    <li><strong>Astronomical:</strong> Sunrise, sunset times</li>
                                                </ul>
                                            </div>
                                            <div class="col-md-6">
                                                <h6 class="text-info">Forecast Data</h6>
                                                <ul class="text-light small">
                                                    <li><strong>Minutely:</strong> Precipitation for next hour</li>
                                                    <li><strong>Hourly:</strong> 48-hour forecast with intervals</li>
                                                    <li><strong>Daily:</strong> 7-day forecast with details</li>
                                                    <li><strong>Alerts:</strong> Severe weather notifications</li>
                                                </ul>
                                            </div>
                                        </div>

                                        <h6 class="text-warning mb-3">Data Processing Pipeline</h6>
                                        <div class="row text-center mb-4">
                                            <div class="col-md-3">
                                                <div class="border rounded p-2 bg-success">
                                                    <small class="fw-bold">Step 1</small>
                                                    <div class="text-light">API Request</div>
                                                    <i class="fas fa-paper-plane mt-1"></i>
                                                </div>
                                                <small class="text-light">Send location coordinates</small>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="border rounded p-2 bg-info">
                                                    <small class="fw-bold">Step 2</small>
                                                    <div class="text-light">Data Retrieval</div>
                                                    <i class="fas fa-download mt-1"></i>
                                                </div>
                                                <small class="text-light">Fetch weather data</small>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="border rounded p-2 bg-warning">
                                                    <small class="fw-bold">Step 3</small>
                                                    <div class="text-light">Processing</div>
                                                    <i class="fas fa-cogs mt-1"></i>
                                                </div>
                                                <small class="text-light">Format and analyze data</small>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="border rounded p-2 bg-primary">
                                                    <small class="fw-bold">Step 4</small>
                                                    <div class="text-light">Presentation</div>
                                                    <i class="fas fa-chart-line mt-1"></i>
                                                </div>
                                                <small class="text-light">Display to users</small>
                                            </div>
                                        </div>

                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <h6 class="text-success">Sample Data Structure</h6>
                                                <div class="bg-dark p-3 rounded">
                                                    <code class="text-light small">
    {<br>
    &nbsp;&nbsp;"lat": 33.44,<br>
    &nbsp;&nbsp;"lon": -94.04,<br>
    &nbsp;&nbsp;"timezone": "America/Chicago",<br>
    &nbsp;&nbsp;"current": {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;"dt": 1684929490,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;"temp": 292.55,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;"weather": [{...}]<br>
    &nbsp;&nbsp;},<br>
    &nbsp;&nbsp;"hourly": [...],<br>
    &nbsp;&nbsp;"daily": [...],<br>
    &nbsp;&nbsp;"alerts": [...]<br>
    }
                                                    </code>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <h6 class="text-success">Key Data Fields</h6>
                                                <ul class="text-light small">
                                                    <li><strong>dt:</strong> Unix timestamp of data point</li>
                                                    <li><strong>temp:</strong> Temperature in Kelvin</li>
                                                    <li><strong>feels_like:</strong> Human perception of temperature</li>
                                                    <li><strong>pressure:</strong> Atmospheric pressure (hPa)</li>
                                                    <li><strong>humidity:</strong> Relative humidity (%)</li>
                                                    <li><strong>weather:</strong> Array of weather conditions</li>
                                                    <li><strong>wind_speed:</strong> Wind speed (m/s)</li>
                                                    <li><strong>pop:</strong> Probability of precipitation</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Data Quality & Accuracy -->
                            <div class="accordion-item bg-dark border-dark">
                                <h2 class="accordion-header">
                                    <button class="accordion-button bg-dark text-light collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#dataQuality">
                                        <i class="fas fa-check-circle me-2"></i>Data Quality & Accuracy
                                    </button>
                                </h2>
                                <div id="dataQuality" class="accordion-collapse collapse" data-bs-parent="#dataSourcesAccordion">
                                    <div class="accordion-body">
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <h6 class="text-warning">Accuracy Estimates</h6>
                                                <div class="table-responsive">
                                                    <table class="table table-sm table-dark">
                                                        <thead>
                                                            <tr>
                                                                <th>Data Type</th>
                                                                <th>Accuracy</th>
                                                                <th>Update Frequency</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>Current Conditions</td>
                                                                <td><span class="badge bg-success">±0.5°C</span></td>
                                                                <td>10 minutes</td>
                                                            </tr>
                                                            <tr>
                                                                <td>24-hour Forecast</td>
                                                                <td><span class="badge bg-warning">±1.5°C</span></td>
                                                                <td>Hourly</td>
                                                            </tr>
                                                            <tr>
                                                                <td>7-day Forecast</td>
                                                                <td><span class="badge bg-info">±3.0°C</span></td>
                                                                <td>Daily</td>
                                                            </tr>
                                                            <tr>
                                                                <td>Precipitation</td>
                                                                <td><span class="badge bg-success">±10%</span></td>
                                                                <td>15 minutes</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <h6 class="text-warning">Limitations & Considerations</h6>
                                                <div class="text-light small">
                                                    <div class="mb-2">
                                                        <i class="fas fa-exclamation-triangle text-warning me-2"></i>
                                                        <strong>Local Variations:</strong> Microclimates and hyper-local conditions not fully captured
                                                    </div>
                                                    <div class="mb-2">
                                                        <i class="fas fa-exclamation-triangle text-warning me-2"></i>
                                                        <strong>Rapid Changes:</strong> Severe weather can develop faster than model updates
                                                    </div>
                                                    <div class="mb-2">
                                                        <i class="fas fa-exclamation-triangle text-warning me-2"></i>
                                                        <strong>Data Latency:</strong> Some data points may have 10-15 minute delay
                                                    </div>
                                                    <div class="mb-2">
                                                        <i class="fas fa-exclamation-triangle text-warning me-2"></i>
                                                        <strong>Model Uncertainty:</strong> Forecast accuracy decreases with time
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="alert alert-warning mt-3">
                                            <small>
                                                <i class="fas fa-info-circle me-2"></i>
                                                <strong>Note:</strong> Weather forecasts are estimates based on mathematical models. Always check official sources during severe weather events.
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="bg-secondary rounded-top p-4">
            <div class="row">
                <div class="col-12 col-sm-6 text-center text-sm-start">
                    &copy; <a href="#">Weather Analytics Dashboard</a>, All Rights Reserved. 
                </div>
                <div class="col-12 col-sm-6 text-center text-sm-end">
                    Real-time Weather Data & Forecasts
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->
</div>
<!-- Content End -->

{% endblock %}